import{r as a,j as e,C as R,M as T,i as C}from"../../main/index-BRNH0Gtr.js";import{I as U,B as m}from"./Input.DGPVMeRE.js";import{S as E}from"./Select.HEGhKSLD.js";import{s as I,S as M,V as B,X as V,R as X}from"./selectKWords.B88nwRo8.js";const v="---",y=10,p=Array.from(Array(y)).map(()=>""),x=Object.entries(R).map(([o,l])=>({value:l,label:o}));x.unshift({value:v,label:"---"});function _(){const[o,l]=a.useState([]),[n,S]=a.useState(x[0]),[N,d]=a.useState(),[b,A]=a.useState([]),w=a.useMemo(()=>{const t=n.value===v?o:o.filter(s=>s.categories.includes(n.value));return I({data:t,strategy:M.Knowledge,wordCount:y})},[o,n]),[u,f]=a.useState(()=>p),W=()=>{d(!0);const t=[];w.forEach((s,c)=>{const{id:r,spelling:h}=s;if(!(h===u[c]))return;const i={...s,points:Math.min(s.points+1,T)};t.push(i),C.update(r,i)}),A(t)};a.useEffect(()=>{async function t(){const s=await C.readAll();l(s)}t()},[]);const k=()=>{f(p),d(!1),l(t=>t.map(s=>b.find(r=>r.id===s.id)??s))},g=()=>{f(p),d(!1)},O=t=>{S(t),g()};return o.length?e.jsxs("div",{className:"flex size-full flex-col items-center justify-center gap-10 overflow-auto p-6",children:[e.jsx(E,{selectedOption:n,setOption:O,options:x}),e.jsx("div",{className:"flex w-full max-w-md flex-col gap-3 rounded-md border p-4",children:w.map(({spelling:t,meaning:s,soundsLike:c},r)=>{const h=t===u[r];return e.jsxs("div",{className:"flex h-10 w-full items-center justify-between gap-10",children:[e.jsx("div",{title:c,children:s[0]}),e.jsxs("div",{className:"flex h-full items-center gap-2",children:[e.jsx(U,{value:u[r],setValue:j=>f(i=>i.with(r,j)),className:"!w-36"}),e.jsx("div",{className:"h-full w-6",children:N&&e.jsx("div",{className:"flex h-full items-center justify-center",children:h?e.jsx(B,{className:"h-1/2",borderColor:"#19d23a",color:"#19d23a",title:t}):e.jsx(V,{className:"h-1/2 stroke-red-500",title:t})})})]})]},r)})}),e.jsxs("div",{className:"flex w-full max-w-md items-center justify-between gap-4",children:[e.jsx(m,{content:"Check",onClick:W,className:"h-10 w-24"}),e.jsx(m,{content:"retry",onClick:g,className:"flex flex-col-reverse items-center justify-center gap-1 bg-neutral-600 hover:bg-neutral-700 active:bg-neutral-800",children:e.jsx(X,{className:"size-4"})}),e.jsx(m,{content:"Next",onClick:k,className:"h-10 w-24 bg-green-600 hover:bg-green-700 active:bg-green-800"})]})]}):null}export{_ as default};
//# sourceMappingURL=index.CWv4IQmd.js.map
