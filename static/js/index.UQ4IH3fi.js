import{r as s,j as e,c as F,i as I}from"../../main/index-WM5f9z4P.js";import{I as c,B as K}from"./Input.RJB6uFVm.js";import{D as L}from"./DisappearingMessage.sJJz3vBN.js";const T=350,M=50;function k(f){const{value:g,setValue:t,step:r=1,placeholder:m=""}=f,[o,n]=s.useState(null),a=s.useRef(!1),l=s.useRef(!1),i=s.useRef(null),u=()=>t(p=>+p+r),v=()=>t(p=>+p-r),j=()=>{u(),a.current=!0,i.current=setTimeout(()=>{n(setInterval(u,M))},T)},d=()=>{a.current=!1,clearTimeout(i.current),clearInterval(o)},h=()=>{v(),l.current=!0,i.current=setTimeout(()=>{n(setInterval(v,M))},T)},x=()=>{l.current=!1,clearTimeout(i.current),clearInterval(o)};return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{value:g,setValue:t,placeholder:m}),e.jsxs("div",{className:"flex flex-col items-center justify-between p-0.5",children:[e.jsx("button",{type:"button",onMouseDown:j,onMouseUp:d,onMouseLeave:d,onTouchStart:j,onTouchEnd:d,className:"flex size-4 items-center justify-center rounded-md bg-neutral-200 text-xs",children:"▲"}),e.jsx("button",{type:"button",onMouseDown:h,onMouseUp:x,onMouseLeave:x,onTouchStart:h,onTouchEnd:x,className:"flex size-4 items-center justify-center rounded-md bg-neutral-200 text-xs",children:"▼"})]})]})}function A(f){const{selectedOption:g,setOption:t,options:r,className:m}=f;return e.jsx("select",{value:g.value,onChange:o=>{const n=o.target.value,a=r.find(l=>l.value.toString()===n.toString());t(a)},className:F("h-8 cursor-pointer rounded-md border p-1 hover:border-blue-400 focus:border-blue-600 dark:bg-slate-900",m),children:r.map(({value:o,label:n})=>e.jsx("option",{value:o,children:n},o))})}const O={value:-1,label:"---",word:{}};function z(){const[f,g]=s.useState(null),[t,r]=s.useState(()=>O),[m,o]=s.useState([]),[n,a]=s.useState(""),[l,i]=s.useState(""),[u,v]=s.useState(""),[j,d]=s.useState(""),[h,x]=s.useState(""),[p,N]=s.useState(0),[w,W]=s.useState("");s.useEffect(()=>{t.value!==-1&&(a(t.word.spelling),v(t.word.soundsLike),i(t.word.meaning.join(", ")),d(t.word.pluralForeignKey??""),x(t.word.singularForeignKey??""),N(t.word.points),W(t.word.categories.join(", ")))},[t]),s.useEffect(()=>{async function S(){const V=(await I.readAll()).sort((y,E)=>y.meaning[0].localeCompare(E.meaning[0])).map((y,E)=>({value:E,label:y.meaning[0],word:y}));V.unshift(O),o(V)}S()},[]);const R=!(n&&l&&u&&w&&t.value>-1),D=async()=>{const S={...t.word,spelling:n,meaning:l.split(",").map(b=>b.trim()),soundsLike:u,pluralForeignKey:j,singularForeignKey:h,points:p,categories:w.split(",").map(b=>b.trim())};await I.update(S.id,S),g(Math.floor(Math.random()*1e3))};return e.jsxs("div",{className:"flex size-full flex-col items-center justify-center gap-10 p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Edit Word"}),e.jsx(A,{selectedOption:t,setOption:r,options:m}),e.jsxs("div",{className:"flex flex-col items-start justify-start gap-6 overflow-auto",children:[e.jsxs("div",{children:[e.jsx("div",{children:"Spelling:"}),e.jsx(c,{value:n,setValue:a})]}),e.jsxs("div",{children:[e.jsx("div",{children:"Meaning:"}),e.jsx(c,{value:l,setValue:i})]}),e.jsxs("div",{children:[e.jsx("div",{children:"Sounds Like:"}),e.jsx(c,{value:u,setValue:v})]}),e.jsxs("div",{children:[e.jsx("div",{children:"Plural Foreign Key:"}),e.jsx(c,{value:j,setValue:d})]}),e.jsxs("div",{children:[e.jsx("div",{children:"Singular Foreign Key:"}),e.jsx(c,{value:h,setValue:x})]}),e.jsxs("div",{children:[e.jsx("div",{children:"Points:"}),e.jsx(k,{value:p,setValue:N})]}),e.jsxs("div",{children:[e.jsx("div",{children:"Categories:"}),e.jsx(c,{value:w,setValue:W})]})]}),e.jsx(L,{value:f,className:"flex items-center justify-center",children:e.jsx("div",{className:"h-full text-lg text-green-400",children:"Word edited successfully!"})}),e.jsx(K,{content:"Edit word",disabled:R,onClick:D})]})}export{z as default};
//# sourceMappingURL=index.C5b7zCgP.js.map
