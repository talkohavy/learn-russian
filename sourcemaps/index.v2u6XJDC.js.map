{"version":3,"file":"index.BFo5GP58.js","sources":["../../../src/components/NumberInput/constants.ts","../../../src/components/NumberInput/NumberInput.tsx","../../../src/pages/EditWordPage/EditWordPage.tsx"],"sourcesContent":["const DELAY_START_RUNNING = 350;\nconst DELAY_BETWEEN_STEPS = 50;\n\nexport { DELAY_BETWEEN_STEPS, DELAY_START_RUNNING };\n","import { useRef, useState } from 'react';\nimport Input from '../Input';\nimport { DELAY_BETWEEN_STEPS, DELAY_START_RUNNING } from './constants';\n\ntype NumberInputProps = {\n  value: any;\n  setValue: (value: any) => void;\n  step?: number;\n  placeholder?: string;\n};\n\nexport default function NumberInput(props: NumberInputProps) {\n  const { value, setValue, step = 1, placeholder = '' } = props;\n\n  const [intervalId, setIntervalId] = useState<any>(null);\n  const isAddingRef = useRef(false);\n  const isSubtractingRef = useRef(false);\n  const timeoutIdRef = useRef<any>(null);\n\n  const incrementValue = () => setValue((prev: any) => +prev + step);\n  const decrementValue = () => setValue((prev: any) => +prev - step);\n\n  const startAdding = () => {\n    incrementValue();\n\n    isAddingRef.current = true;\n    timeoutIdRef.current = setTimeout(() => {\n      setIntervalId(setInterval(incrementValue, DELAY_BETWEEN_STEPS));\n    }, DELAY_START_RUNNING);\n  };\n\n  const stopAdding = () => {\n    isAddingRef.current = false;\n    clearTimeout(timeoutIdRef.current);\n    clearInterval(intervalId);\n  };\n\n  const startSubtracting = () => {\n    decrementValue();\n\n    isSubtractingRef.current = true;\n    timeoutIdRef.current = setTimeout(() => {\n      setIntervalId(setInterval(decrementValue, DELAY_BETWEEN_STEPS));\n    }, DELAY_START_RUNNING);\n  };\n\n  const stopSubtracting = () => {\n    isSubtractingRef.current = false;\n    clearTimeout(timeoutIdRef.current);\n    clearInterval(intervalId);\n  };\n\n  return (\n    <div className='flex gap-2'>\n      <Input value={value} setValue={setValue} placeholder={placeholder} />\n\n      <div className='flex flex-col items-center justify-between p-0.5'>\n        <button\n          type='button'\n          onMouseDown={startAdding}\n          onMouseUp={stopAdding}\n          onMouseLeave={stopAdding}\n          onTouchStart={startAdding}\n          onTouchEnd={stopAdding}\n          className='flex size-4 items-center justify-center rounded-md bg-neutral-200 text-xs'\n        >\n          ▲\n        </button>\n        <button\n          type='button'\n          onMouseDown={startSubtracting}\n          onMouseUp={stopSubtracting}\n          onMouseLeave={stopSubtracting}\n          onTouchStart={startSubtracting}\n          onTouchEnd={stopSubtracting}\n          className='flex size-4 items-center justify-center rounded-md bg-neutral-200 text-xs'\n        >\n          ▼\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport Button from '@src/components/Button';\nimport DisappearingMessage from '@src/components/DisappearingMessage';\nimport Input from '@src/components/Input';\nimport NumberInput from '@src/components/NumberInput';\nimport Select from '@src/components/Select';\nimport { SelectOption } from '@src/components/Select/types';\nimport { indexDBClient } from '@src/main';\nimport type { Category, Word } from '@src/utils/types';\n\nconst defaultOption = { value: -1, label: '---', word: {} as Word };\n\nexport default function EditWordPage() {\n  const [savedValue, setSavedValue] = useState<number | null>(null);\n  const [selectedWord, setSelectedWord] = useState<SelectOption>(() => defaultOption);\n  const [wordOptions, setWordOptions] = useState<Array<{ value: number | string; label: string; word: Word }>>([]);\n  const [spelling, setSpelling] = useState('');\n  const [meaning, setMeaning] = useState<string>('');\n  const [soundsLike, setSoundsLike] = useState<string>('');\n  const [pluralForeignKey, setPluralForeignKey] = useState<string>('');\n  const [singularForeignKey, setSingularForeignKey] = useState<string>('');\n  const [points, setPoints] = useState<number>(0);\n  const [categories, setCategories] = useState<string>('');\n\n  useEffect(() => {\n    if (selectedWord.value === -1) return;\n\n    setSpelling(selectedWord.word.spelling);\n    setSoundsLike(selectedWord.word.soundsLike);\n    setMeaning(selectedWord.word.meaning.join(', '));\n    setPluralForeignKey(selectedWord.word.pluralForeignKey ?? '');\n    setSingularForeignKey(selectedWord.word.singularForeignKey ?? '');\n    setPoints(selectedWord.word.points);\n    setCategories(selectedWord.word.categories.join(', '));\n  }, [selectedWord]);\n\n  useEffect(() => {\n    async function fetchWordOptions() {\n      const allWords = (await indexDBClient.readAll()) as Array<Word>;\n\n      const allWordSorted = allWords.sort((a, b) => a.meaning[0]!.localeCompare(b.meaning[0]!));\n\n      const wordOptions = allWordSorted.map((word, index) => ({ value: index, label: word.meaning[0]!, word }));\n      wordOptions.unshift(defaultOption);\n\n      setWordOptions(wordOptions);\n    }\n\n    fetchWordOptions();\n  }, []);\n\n  const isDisabled = !(spelling && meaning && soundsLike && categories && (selectedWord.value as number) > -1);\n\n  const resetFields = useCallback(() => {\n    setSpelling('');\n    setMeaning('');\n    setSoundsLike('');\n    setPluralForeignKey('');\n    setSingularForeignKey('');\n    setCategories('');\n  }, [setSpelling, setMeaning, setSoundsLike, setPluralForeignKey, setSingularForeignKey, setCategories]);\n\n  const handleEditWordClick = async () => {\n    const updatedWord: Word = {\n      ...selectedWord.word,\n      spelling,\n      meaning: meaning.split(',').map((word) => word.trim()),\n      soundsLike,\n      pluralForeignKey,\n      singularForeignKey,\n      points,\n      categories: categories.split(',').map((word) => word.trim()) as Array<Category>,\n    };\n\n    await indexDBClient.update(updatedWord.id!, updatedWord);\n\n    resetFields();\n\n    setSavedValue(Math.floor(Math.random() * 1000));\n  };\n\n  return (\n    <div className='flex size-full flex-col items-center justify-center gap-10 p-6'>\n      <h2 className='text-xl font-bold'>Edit Word</h2>\n\n      <Select selectedOption={selectedWord} setOption={setSelectedWord} options={wordOptions} />\n\n      <div className='flex flex-col items-start justify-start gap-6 overflow-auto'>\n        <div>\n          <div>Spelling:</div>\n          <Input value={spelling} setValue={setSpelling} />\n        </div>\n\n        <div>\n          <div>Meaning:</div>\n          <Input value={meaning} setValue={setMeaning} />\n        </div>\n\n        <div>\n          <div>Sounds Like:</div>\n          <Input value={soundsLike} setValue={setSoundsLike} />\n        </div>\n\n        <div>\n          <div>Plural Foreign Key:</div>\n          <Input value={pluralForeignKey} setValue={setPluralForeignKey} />\n        </div>\n\n        <div>\n          <div>Singular Foreign Key:</div>\n          <Input value={singularForeignKey} setValue={setSingularForeignKey} />\n        </div>\n\n        <div>\n          <div>Points:</div>\n          <NumberInput value={points} setValue={setPoints} />\n        </div>\n\n        <div>\n          <div>Categories:</div>\n          <Input value={categories} setValue={setCategories} />\n        </div>\n      </div>\n\n      <DisappearingMessage value={savedValue} className='flex items-center justify-center'>\n        <div className='h-full text-lg text-green-400'>Word edited successfully!</div>\n      </DisappearingMessage>\n\n      <Button content='Edit word' disabled={isDisabled} onClick={handleEditWordClick} />\n    </div>\n  );\n}\n"],"names":["DELAY_START_RUNNING","DELAY_BETWEEN_STEPS","NumberInput","props","value","setValue","step","placeholder","intervalId","setIntervalId","useState","isAddingRef","useRef","isSubtractingRef","timeoutIdRef","incrementValue","prev","decrementValue","startAdding","stopAdding","startSubtracting","stopSubtracting","jsxs","jsx","Input","defaultOption","EditWordPage","savedValue","setSavedValue","selectedWord","setSelectedWord","wordOptions","setWordOptions","spelling","setSpelling","meaning","setMeaning","soundsLike","setSoundsLike","pluralForeignKey","setPluralForeignKey","singularForeignKey","setSingularForeignKey","points","setPoints","categories","setCategories","useEffect","fetchWordOptions","indexDBClient","a","b","word","index","isDisabled","resetFields","useCallback","handleEditWordClick","updatedWord","Select","DisappearingMessage","Button"],"mappings":"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"}